<!doctype html>
<html lang="en" class="dark scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ImmunoBench</title>
  <meta name="description" content="ImmunoBench ‚Äì An open benchmark for immunohistochemistry-driven computational pathology." />
  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js (charts for rankings & task details) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß´</text></svg>">
  <style>
    :root { color-scheme: dark; }
    /* ÁéªÁíÉÊãüÊÄÅÂç°Áâá */
    .glass {
      background: rgba(15, 23, 42, 0.55); /* slate-900 with opacity */
      backdrop-filter: blur(10px);
      border: 1px solid rgba(148, 163, 184, 0.25); /* slate-400/25 */
    }
    /* ÂÆπÂô®ÂÆΩÂ∫¶ */
    .container { max-width: 1200px; }
    /* Ë°®Ê†ºÊªöÂä® */
    .table-wrap { overflow-x: auto; }
    /* ‰ª£Á†ÅÂå∫Á≠âÂÆΩÊï∞Â≠ó */
    .tabular-nums { font-variant-numeric: tabular-nums; }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100 selection:bg-fuchsia-600/40">
  <!-- Header -->
  <header class="border-b border-slate-800/60 sticky top-0 z-50 glass">
    <div class="container mx-auto px-4 py-4 flex items-center gap-6">
      <div class="text-xl md:text-2xl font-semibold tracking-wide">
        <span class="bg-gradient-to-r from-fuchsia-400 via-sky-400 to-emerald-400 bg-clip-text text-transparent">ImmunoBench</span>
      </div>
      <nav class="ml-auto text-sm md:text-base">
        <ul class="flex gap-4 md:gap-6">
          <li><a href="#overview" class="hover:text-fuchsia-300">Overview</a></li>
          <li><a href="#tasks" class="hover:text-fuchsia-300">Tasks</a></li>
          <li><a href="#datasets" class="hover:text-fuchsia-300">Datasets</a></li>
          <li><a href="#about" class="hover:text-fuchsia-300">About</a></li>
        </ul>
      </nav>
      <a href="https://github.com/yourname/ImmunoBench" target="_blank" class="ml-2 text-xs md:text-sm px-3 py-1 rounded-full glass hover:brightness-110">GitHub</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="container mx-auto px-4 py-10 md:py-14">
    <div class="grid md:grid-cols-2 gap-6 items-center">
      <div>
        <h1 class="text-3xl md:text-5xl font-semibold leading-tight">
          An Open Benchmark for <span class="bg-gradient-to-r from-fuchsia-400 via-sky-400 to-emerald-400 bg-clip-text text-transparent">IHC-driven</span> Computational Pathology
        </h1>
        <p class="mt-4 text-slate-300">
          Explore foundation models across immunohistochemical and histological tasks. View per-category mean rankings and drill down into per-task metrics interactively.
        </p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#tasks" class="px-4 py-2 rounded-xl glass hover:brightness-110">Browse Tasks</a>
          <a href="#overview" class="px-4 py-2 rounded-xl border border-fuchsia-400/40 hover:border-fuchsia-300/70">Model Overview</a>
        </div>
      </div>
<!-- Stats Overview -->
<div class="glass rounded-2xl p-8 text-center">
  <h2 class="text-2xl font-semibold mb-6 text-white">Benchmark Overview</h2>
  <div class="grid grid-cols-2 sm:grid-cols-4 gap-6 text-white text-lg font-medium">
    <div class="bg-[#111827] rounded-xl p-6 hover:scale-105 transition-transform duration-300 shadow-md">
      <p class="text-4xl font-bold text-cyan-400">15</p>
      <p class="text-gray-400 mt-2">Models</p>
    </div>
    <div class="bg-[#111827] rounded-xl p-6 hover:scale-105 transition-transform duration-300 shadow-md">
      <p class="text-4xl font-bold text-indigo-400">79</p>
      <p class="text-gray-400 mt-2">Tasks</p>
    </div>
    <div class="bg-[#111827] rounded-xl p-6 hover:scale-105 transition-transform duration-300 shadow-md">
      <p class="text-4xl font-bold text-blue-400">17</p>
      <p class="text-gray-400 mt-2">Centers</p>
    </div>
    <div class="bg-[#111827] rounded-xl p-6 hover:scale-105 transition-transform duration-300 shadow-md">
      <p class="text-4xl font-bold text-teal-400">13,657</p>
      <p class="text-gray-400 mt-2">Patients</p>
    </div>
    <div class="bg-[#111827] rounded-xl p-6 hover:scale-105 transition-transform duration-300 shadow-md">
      <p class="text-4xl font-bold text-purple-400">36,333</p>
      <p class="text-gray-400 mt-2">WSIs</p>
    </div>
    <div class="bg-[#111827] rounded-xl p-6 hover:scale-105 transition-transform duration-300 shadow-md">
      <p class="text-4xl font-bold text-pink-400">464,294</p>
      <p class="text-gray-400 mt-2">Patches</p>
    </div>
    <div class="bg-[#111827] rounded-xl p-6 hover:scale-105 transition-transform duration-300 shadow-md">
      <p class="text-4xl font-bold text-yellow-400">26</p>
      <p class="text-gray-400 mt-2">Tissues</p>
    </div>
    <div class="bg-[#111827] rounded-xl p-6 hover:scale-105 transition-transform duration-300 shadow-md">
      <p class="text-4xl font-bold text-rose-400">88</p>
      <p class="text-gray-400 mt-2">Stains</p>
    </div>
  </div>
</div>

    </div>
  </section>

  <!-- Overview: Foundation Models -->
  <section id="overview" class="container mx-auto px-4 py-8 md:py-12">
    <h2 class="text-2xl md:text-3xl font-semibold mb-4">Foundation Models</h2>
    <div class="glass rounded-2xl p-4 md:p-6 table-wrap">
      <table class="min-w-full text-sm md:text-[15px]">
        <thead class="text-slate-300 border-b border-slate-700/60">
          <tr>
            <th class="text-left py-2 pr-6">Foundation Model</th>
            <th class="text-left py-2 pr-6">Level</th>
            <th class="text-left py-2 pr-6">IHC in Training</th>
            <th class="text-left py-2 pr-6">Published In</th>
            <th class="text-left py-2 pr-6">Date</th>
            <th class="text-left py-2 pr-6">SSL Method</th>
            <th class="text-left py-2 pr-6">Architecture</th>
            <th class="text-right py-2 pr-2">#Params</th>
            <th class="text-right py-2 pr-2">#WSIs</th>
          </tr>
        </thead>
        <tbody id="fmTableBody" class="divide-y divide-slate-800/50"></tbody>
      </table>
    </div>
  </section>

  <!-- Tasks & Rankings -->
  <section id="tasks" class="container mx-auto px-4 py-8 md:py-12">
    <h2 class="text-2xl md:text-3xl font-semibold mb-4">Task Categories & Rankings</h2>

    <!-- Tabs -->
    <div class="flex flex-wrap gap-2 mb-4" id="categoryTabs"></div>

    <!-- Ranking Card -->
    <div class="glass rounded-2xl p-4 md:p-6">
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-xl font-semibold mb-2">
            Mean Rank by Foundation Model <span id="currentCategoryLabel" class="text-slate-300 text-sm"></span>
          </h3>
          <div class="table-wrap">
            <table class="min-w-full text-sm md:text-[15px]">
              <thead class="text-slate-300 border-b border-slate-700/60">
                <tr>
                  <th class="text-left py-2 pr-4">Model</th>
                  <th class="text-right py-2 pr-2">Mean Rank ‚Üì</th>
                </tr>
              </thead>
              <tbody id="rankTableBody" class="divide-y divide-slate-800/50"></tbody>
            </table>
          </div>
        </div>
        <div class="p-2">
          <canvas id="rankChart" height="280" aria-label="Rank bar chart"></canvas>
        </div>
      </div>
    </div>

    <!-- Tasks List -->
    <div class="mt-6 grid md:grid-cols-2 gap-6" id="taskCards"></div>
  </section>

  <!-- Datasets -->
  <section id="datasets" class="container mx-auto px-4 py-8 md:py-12">
    <h2 class="text-2xl md:text-3xl font-semibold mb-4">Datasets</h2>

    <div class="grid lg:grid-cols-2 gap-6">
      <!-- Public -->
      <div class="glass rounded-2xl p-4 md:p-6 table-wrap">
        <h3 class="text-lg font-semibold mb-2">Public Datasets</h3>
        <table class="min-w-full text-sm md:text-[15px]">
          <thead class="text-slate-300 border-b border-slate-700/60">
            <tr>
              <th class="text-left py-2 pr-4">Dataset</th>
              <th class="text-left py-2 pr-4">Stain Type</th>
              <th class="text-left py-2 pr-4">Disease</th>
              <th class="text-right py-2 pr-2">Patients</th>
              <th class="text-right py-2 pr-2">Data Volume</th>
              <th class="text-left py-2 pr-2">Format</th>
            </tr>
          </thead>
          <tbody id="publicDataBody" class="divide-y divide-slate-800/50"></tbody>
        </table>
      </div>
      <!-- Private -->
      <div class="glass rounded-2xl p-4 md:p-6 table-wrap">
        <h3 class="text-lg font-semibold mb-2">Private Datasets</h3>
        <table class="min-w-full text-sm md:text-[15px]">
          <thead class="text-slate-300 border-b border-slate-700/60">
            <tr>
              <th class="text-left py-2 pr-4">Dataset</th>
              <th class="text-left py-2 pr-4">Stain Type</th>
              <th class="text-left py-2 pr-4">Disease</th>
              <th class="text-right py-2 pr-2">Patients</th>
              <th class="text-right py-2 pr-2">Data Volume</th>
              <th class="text-left py-2 pr-2">Format</th>
            </tr>
          </thead>
          <tbody id="privateDataBody" class="divide-y divide-slate-800/50"></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="container mx-auto px-4 py-8 md:py-12">
    <h2 class="text-2xl md:text-3xl font-semibold mb-4">About</h2>
    <div class="glass rounded-2xl p-6">
      <p class="text-slate-300">
        ImmunoBench is an evolving benchmark for IHC-centric computational pathology.  
        It reports mean rankings across task categories and provides drill-downs to per-task metrics.
        Add more tasks/models in the data block below to expand the benchmark.
      </p>
    </div>
  </section>

  <!-- Task Modal -->
  <div id="taskModal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/60" onclick="closeTaskModal()"></div>
    <div class="relative glass rounded-2xl p-4 md:p-6 w-[92%] md:w-[860px] max-h-[88vh] overflow-y-auto">
      <div class="flex items-start gap-4">
        <div class="grow">
          <h3 id="modalTitle" class="text-xl font-semibold"></h3>
          <p id="modalSubtitle" class="text-slate-300 text-sm mt-1"></p>
        </div>
        <button onclick="closeTaskModal()" class="px-3 py-1 rounded-lg hover:bg-slate-800/60">‚úï</button>
      </div>
      <div class="grid md:grid-cols-2 gap-6 mt-4">
        <div class="table-wrap">
          <table class="min-w-full text-sm md:text-[15px]">
            <thead class="text-slate-300 border-b border-slate-700/60">
              <tr>
                <th class="text-left py-2 pr-4">Model</th>
                <th class="text-right py-2 pr-2">AUC</th>
                <th class="text-right py-2 pr-2">ACC</th>
                <th class="text-right py-2 pr-2">F1</th>
              </tr>
            </thead>
            <tbody id="modalTableBody" class="divide-y divide-slate-800/50 tabular-nums"></tbody>
          </table>
        </div>
        <div class="p-2">
          <canvas id="taskChart" height="280" aria-label="Task AUC chart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- ===================== DATA & LOGIC ===================== -->
  <script>
    // ========== 1) Data you will edit going forward ==========
    const DATA = {
      // 5 Categories (you can rename or add more)
      categories: [
        { id: "cat-ihc", name: "Immunohistochemical Biomarker Expression", tasks: ["CK56 (Pancancer)", "P63 (Pancancer)", "SYN (Pancancer)"] },
        { id: "cat-tissue", name: "Tissue & Microenvironment Classification", tasks: [] },
        { id: "cat-hist", name: "Histological Region Classification", tasks: [] },
        { id: "cat-prog", name: "Disease Progression & Prognosis", tasks: [] },
        { id: "cat-misc", name: "Other Clinical Tasks", tasks: [] },
      ],

      // Per-task metrics (AUC/ACC/F1). Use consistent model names.
      // Values use {mean, std}. Strings preserved as provided; we parse mean for ranking.
      tasks: {
        "CK56 (Pancancer)": [
          { model: "Chief", auc: "0.981 ¬± 0.0120", acc: "0.898 ¬± 0.0322", f1: "0.894 ¬± 0.0353" },
          { model: "Conch", auc: "0.986 ¬± 0.0252", acc: "0.969 ¬± 0.0175", f1: "0.968 ¬± 0.0184" },
          { model: "Conch v1.5", auc: "0.987 ¬± 0.0176", acc: "0.973 ¬± 0.0107", f1: "0.972 ¬± 0.0113" },
          { model: "CtransPath", auc: "0.976 ¬± 0.0189", acc: "0.918 ¬± 0.0425", f1: "0.914 ¬± 0.0450" },
          { model: "Prov-Gigapath", auc: "0.991 ¬± 0.0063", acc: "0.941 ¬± 0.0500", f1: "0.938 ¬± 0.0545" },
          { model: "GPFM", auc: "0.975 ¬± 0.0157", acc: "0.902 ¬± 0.0367", f1: "0.896 ¬± 0.0395" },
          { model: "H-optimus-0", auc: "0.983 ¬± 0.0151", acc: "0.925 ¬± 0.0322", f1: "0.921 ¬± 0.0358" },
          { model: "Phikon", auc: "0.974 ¬± 0.0164", acc: "0.886 ¬± 0.0351", f1: "0.881 ¬± 0.0371" },
          { model: "UNI", auc: "0.970 ¬± 0.0261", acc: "0.914 ¬± 0.0224", f1: "0.911 ¬± 0.0226" },
          { model: "Virchow", auc: "0.981 ¬± 0.0153", acc: "0.914 ¬± 0.0382", f1: "0.910 ¬± 0.0413" },
          { model: "Virchow2", auc: "0.979 ¬± 0.0131", acc: "0.933 ¬± 0.0175", f1: "0.931 ¬± 0.0186" },
          { model: "Chief (WSI-level)", auc: "0.945 ¬± 0.0391", acc: "0.835 ¬± 0.0861", f1: "0.825 ¬± 0.1015" },
          { model: "Prov-Gigapath (WSI-level)", auc: "0.875 ¬± 0.0512", acc: "0.792 ¬± 0.0328", f1: "0.780 ¬± 0.0401" },
          { model: "MADELENE (WSI-level)", auc: "0.970 ¬± 0.0174", acc: "0.910 ¬± 0.0328", f1: "0.907 ¬± 0.0339" },
          { model: "TITAN (WSI-level)", auc: "0.977 ¬± 0.0192", acc: "0.933 ¬± 0.0297", f1: "0.931 ¬± 0.0310" },
        ],
        "P63 (Pancancer)": [
          { model: "Chief", auc: "0.910 ¬± 0.0215", acc: "0.812 ¬± 0.0629", f1: "0.806 ¬± 0.0617" },
          { model: "Conch", auc: "0.933 ¬± 0.0168", acc: "0.862 ¬± 0.0370", f1: "0.859 ¬± 0.0371" },
          { model: "Conch v1.5", auc: "0.936 ¬± 0.0178", acc: "0.873 ¬± 0.0172", f1: "0.868 ¬± 0.0193" },
          { model: "CtransPath", auc: "0.887 ¬± 0.0279", acc: "0.808 ¬± 0.0451", f1: "0.804 ¬± 0.0468" },
          { model: "Prov-Gigapath", auc: "0.932 ¬± 0.0335", acc: "0.854 ¬± 0.0483", f1: "0.849 ¬± 0.0503" },
          { model: "GPFM", auc: "0.918 ¬± 0.0390", acc: "0.835 ¬± 0.0399", f1: "0.830 ¬± 0.0372" },
          { model: "H-optimus-0", auc: "0.903 ¬± 0.0290", acc: "0.812 ¬± 0.0285", f1: "0.804 ¬± 0.0322" },
          { model: "Phikon", auc: "0.852 ¬± 0.0306", acc: "0.788 ¬± 0.0527", f1: "0.779 ¬± 0.0583" },
          { model: "UNI", auc: "0.935 ¬± 0.0315", acc: "0.862 ¬± 0.0439", f1: "0.858 ¬± 0.0426" },
          { model: "Virchow", auc: "0.891 ¬± 0.0349", acc: "0.812 ¬± 0.0417", f1: "0.808 ¬± 0.0434" },
          { model: "Virchow2", auc: "0.959 ¬± 0.0272", acc: "0.896 ¬± 0.0443", f1: "0.893 ¬± 0.0457" },
          { model: "Chief (WSI-level)", auc: "0.875 ¬± 0.0348", acc: "0.800 ¬± 0.0483", f1: "0.793 ¬± 0.0512" },
          { model: "Prov-Gigapath (WSI-level)", auc: "0.736 ¬± 0.1124", acc: "0.650 ¬± 0.0885", f1: "0.638 ¬± 0.0881" },
          { model: "MADELENE (WSI-level)", auc: "0.878 ¬± 0.0478", acc: "0.773 ¬± 0.0161", f1: "0.761 ¬± 0.0209" },
          { model: "TITAN (WSI-level)", auc: "0.877 ¬± 0.0350", acc: "0.804 ¬± 0.0439", f1: "0.796 ¬± 0.0497" },
        ],
        "SYN (Pancancer)": [
          { model: "Chief", auc: "0.945 ¬± 0.0554", acc: "0.909 ¬± 0.0680", f1: "0.909 ¬± 0.0682" },
          { model: "Conch", auc: "0.952 ¬± 0.0420", acc: "0.942 ¬± 0.0434", f1: "0.942 ¬± 0.0434" },
          { model: "Conch v1.5", auc: "0.965 ¬± 0.0318", acc: "0.916 ¬± 0.0354", f1: "0.916 ¬± 0.0354" },
          { model: "CtransPath", auc: "0.954 ¬± 0.0497", acc: "0.927 ¬± 0.0426", f1: "0.927 ¬± 0.0431" },
          { model: "Prov-Gigapath", auc: "0.956 ¬± 0.0409", acc: "0.931 ¬± 0.0453", f1: "0.931 ¬± 0.0453" },
          { model: "GPFM", auc: "0.951 ¬± 0.0400", acc: "0.920 ¬± 0.0304", f1: "0.920 ¬± 0.0305" },
          { model: "H-optimus-0", auc: "0.956 ¬± 0.0498", acc: "0.931 ¬± 0.0299", f1: "0.931 ¬± 0.0299" },
          { model: "Phikon", auc: "0.946 ¬± 0.0435", acc: "0.924 ¬± 0.0325", f1: "0.923 ¬± 0.0328" },
          { model: "UNI", auc: "0.951 ¬± 0.0482", acc: "0.916 ¬± 0.0491", f1: "0.916 ¬± 0.0495" },
          { model: "Virchow", auc: "0.959 ¬± 0.0429", acc: "0.935 ¬± 0.0398", f1: "0.934 ¬± 0.0398" },
          { model: "Virchow2", auc: "0.955 ¬± 0.0334", acc: "0.938 ¬± 0.0207", f1: "0.938 ¬± 0.0208" },
          { model: "Chief (WSI-level)", auc: "0.949 ¬± 0.0374", acc: "0.902 ¬± 0.0539", f1: "0.901 ¬± 0.0545" },
          { model: "Prov-Gigapath (WSI-level)", auc: "0.946 ¬± 0.0242", acc: "0.916 ¬± 0.0377", f1: "0.916 ¬± 0.0377" },
          { model: "MADELENE (WSI-level)", auc: "0.958 ¬± 0.0420", acc: "0.920 ¬± 0.0598", f1: "0.920 ¬± 0.0598" },
          { model: "TITAN (WSI-level)", auc: "0.952 ¬± 0.0425", acc: "0.916 ¬± 0.0438", f1: "0.916 ¬± 0.0438" },
        ],
      },

      // Foundation models overview table
      foundationModels: [
        { name: "UNI", level: "patch", ihcTrain: "‚úó", venue: "Nature Medicine", date: "2024.03", ssl: "DINOv2", arch: "ViT-L/16", params: "307M", wsis: "100K", url: "https://www.nature.com/articles/s41591-024-02857-3"},
        { name: "Virchow", level: "patch", ihcTrain: "‚úó", venue: "Nature Medicine", date: "2024.07", ssl: "DINOv2", arch: "ViT-H/14", params: "632M", wsis: "1.5M", url: "https://www.nature.com/articles/s41591-024-03141-0"},
        { name: "Virchow2", level: "patch", ihcTrain: "‚úì", venue: "arXiv", date: "2024.09", ssl: "DINOv2", arch: "ViT-H/14", params: "632M", wsis: "3.1M", url: "https://arxiv.org/abs/2408.00738"},
        { name: "Prov-Gigapath-patch", level: "patch", ihcTrain: "‚úó", venue: "Nature", date: "2024.05", ssl: "DINOv2", arch: "ViT-G/14", params: "1.1B", wsis: "171K", url: "https://www.nature.com/articles/s41586-024-07441-w"},
        { name: "Prov-Gigapath-WSI", level: "WSI", ihcTrain: "‚úó", venue: "Nature", date: "2024.05", ssl: "DINOv2", arch: "ViT-G/14", params: "1.1B", wsis: "500K", url: "https://www.nature.com/articles/s41586-024-07441-w"},
        { name: "Chief-patch", level: "patch", ihcTrain: "‚úó", venue: "Nature", date: "2024.09", ssl: "Swin-T/14", arch: "Swin-T/14", params: "27.8M", wsis: "60K", url: "https://pubmed.ncbi.nlm.nih.gov/39232164/"},
        { name: "Chief-WSI", level: "WSI", ihcTrain: "‚úó", venue: "Nature", date: "2024.09", ssl: "Swin-T/14", arch: "Swin-T/14", params: "27.8M", wsis: "60K", url: "https://pubmed.ncbi.nlm.nih.gov/39232164/"},
        { name: "TITAN", level: "WSI", ihcTrain: "‚úì", venue: "arXiv", date: "2024.09", ssl: "iBOT ‚Üí CoCa", arch: "ViT-L/16", params: "48.5M", wsis: "336K", url: "https://arxiv.org/abs/2411.19666"},
        { name: "MADELENE", level: "WSI", ihcTrain: "‚úì", venue: "ECCV", date: "2024.08", ssl: "-", arch: "multi-head attention-based MIL", params: "91M", wsis: "16.3K", url: "https://arxiv.org/abs/2408.02859"},
        { name: "CtransPath", level: "patch", ihcTrain: "‚úó", venue: "MedIA", date: "2022.01", ssl: "MoCo-v3", arch: "Swin-T/14", params: "28M", wsis: "32.2K", url: "https://www.sciencedirect.com/science/article/abs/pii/S1361841522002043"},
        { name: "H-optimus-0", level: "patch", ihcTrain: "‚úó", venue: "GitHub", date: "2024.08", ssl: "DINOv2", arch: "ViT-G/14", params: "1.1B", wsis: "500K", url: "https://huggingface.co/bioptimus/H-optimus-0"},
        { name: "Phikon", level: "patch", ihcTrain: "‚úó", venue: "arXiv", date: "2023.07", ssl: "iBOT", arch: "ViT-B/16", params: "86.4M", wsis: "6K", url: "https://huggingface.co/owkin/phikon"},
        { name: "GPFM", level: "patch", ihcTrain: "‚úó", venue: "NBME", date: "2025.04", ssl: "Custom", arch: "ViT-L/14", params: "303M", wsis: "72.3K", url: "https://www.nature.com/articles/s41551-025-01488-4"},
        { name: "Conch", level: "patch", ihcTrain: "‚úì", venue: "Nature Medicine", date: "2024.03", ssl: "iBOT ‚Üí CoCa", arch: "ViT-B/16", params: "86M", wsis: "21.4K ‚Üí 1.2M", url: "https://www.nature.com/articles/s41591-024-02856-4"},
        { name: "Conch-v1.5", level: "patch", ihcTrain: "‚úì", venue: "GitHub", date: "2024.09", ssl: "iBOT ‚Üí CoCa", arch: "ViT-L/16", params: "306M", wsis: "1.17M", url: "https://huggingface.co/MahmoodLab/conchv1_5"},
      ],

      // Datasets
      datasets: {
        public: [
          { name: "HE_Ki67", stain: "HE, Ki-67", disease: "Prostate Cancer", patients: "77", volume: "154 WSIs", format: ".png" },
          { name: "PKG_NADT_Prostate_v1", stain: "HE, p53, PTEN, AR, PSA, GR, Ki67, SYP, PIN4", disease: "Prostate Cancer", patients: "39", volume: "1,226 WSIs", format: ".svs" },
          { name: "IHC4BC", stain: "HE, ER, PR, Ki-67", disease: "Breast Cancer", patients: "240", volume: "92,413 Patches", format: ".png" },
          { name: "BCI_dataset", stain: "HE, HER2", disease: "Breast Cancer", patients: "-", volume: "9,746 Patches", format: ".png" },
          { name: "HER2_warwick", stain: "HE, HER2", disease: "Breast Cancer", patients: "-", volume: "200 WSIs", format: ".ndpi" },
          { name: "HANCOCK", stain: "HE, CD3, CD8, CD56, CD68, CD163, MHC1, PDL1", disease: "Head and Neck Cancer", patients: "727", volume: "10,330 WSIs", format: ".svs" },
          { name: "Breast_IMPRESS_DEID", stain: "HE, PD-L1, CD8, CD163", disease: "Breast Cancer", patients: "62", volume: "117 WSIs", format: ".svs" },
          { name: "MIHIC", stain: "CD3, CD20, CD34, CD38, CD68, CDK4, cyclin-D1, D2-40, FAP, Ki-67, P53, SMA", disease: "Lung Cancer", patients: "-", volume: "309,698 Patches", format: ".png" },
          { name: "HNSCC_mIF_mIHC", stain: "CD3, CD8, FoxP3, PanCK", disease: "Head and Neck Cancer", patients: "-", volume: "1,336 Patches", format: ".png" },
          { name: "DLBCL_Morph", stain: "HE, BCL2, BCL6, MUM1, MYC", disease: "Lymphoma", patients: "170", volume: "1,009 WSIs", format: ".png" },
          { name: "InUIT", stain: "CD8, CD20, Ki-67", disease: "Ovarian Cancer", patients: "170", volume: "1,009 WSIs", format: ".tif" },
          { name: "Histai", stain: "CD20, CD10, CK7, CD34, S100, TTF1, P63, SYN, PAX8, GATA3, PD-L1, P40", disease: "Breast, Skin, Thorax, Hematologic, Gastrointestinal, Colorectal", patients: "204", volume: "1481 WSIs", format: ".tif" },
        ],
        private: [
          { name: "breast_malignant_benign", stain: "HE, CK5/6, E-cadherin, P63, Ki-67", disease: "Breast Cancer", patients: "145", volume: "564 WSIs", format: ".sdpc" },
          { name: "breast_subtype", stain: "HE, CK5/6, E-cadherin, P63", disease: "Breast Cancer", patients: "188", volume: "573 WSIs", format: ".sdpc" },
          { name: "brain_subtype", stain: "HE, EMA, GFAP", disease: "Brain Cancer", patients: "188", volume: "521 WSIs", format: ".sdpc" },
          { name: "cervical_CIN_grading", stain: "HE, P16, Ki67", disease: "Cervical Cancer", patients: "175", volume: "488 WSIs", format: ".sdpc" },
          { name: "Breast_RCB_X", stain: "HE, ER, GATA3, HER2, Ki67, PR", disease: "Cervical Cancer", patients: "87", volume: "440 WSIs", format: ".sdpc" },
          { name: "CK56_pancancer", stain: "CK5/6", disease: "Pancancer", patients: "252", volume: "252 WSIs", format: ".sdpc" },
          { name: "P63", stain: "P63", disease: "Pancancer", patients: "257", volume: "257 WSIs", format: ".sdpc" },
          { name: "SYN_pancancer", stain: "SYN", disease: "Pancancer", patients: "275", volume: "275 WSIs", format: ".sdpc" },
          { name: "GATA3_pancancer", stain: "GATA3", disease: "Pancancer", patients: "285", volume: "285 WSIs", format: ".sdpc" },
          { name: "P16_pancancer", stain: "P16", disease: "Pancancer", patients: "297", volume: "297 WSIs", format: ".sdpc" },
          { name: "CD34_pancancer", stain: "CD34", disease: "Pancancer", patients: "464", volume: "464 WSIs", format: ".sdpc" },
          { name: "PAX8_pancancer", stain: "PAX8", disease: "Pancancer", patients: "314", volume: "314 WSIs", format: ".sdpc" },
          { name: "S100_pancancer", stain: "S100", disease: "Pancancer", patients: "262", volume: "262 WSIs", format: ".sdpc" },
          { name: "CK7_pancancer", stain: "CK7", disease: "Pancancer", patients: "192", volume: "192 WSIs", format: ".sdpc" },
          { name: "TTF1_pancancer", stain: "TTF1", disease: "Pancancer", patients: "246", volume: "246 WSIs", format: ".sdpc" },
          { name: "D2_40_pancancer", stain: "D2_40", disease: "Pancancer", patients: "228", volume: "228 WSIs", format: ".sdpc" },
          { name: "Ki_67_pancancer", stain: "Ki67", disease: "Pancancer", patients: "568", volume: "568 WSIs", format: ".sdpc" },
          { name: "P53_pancancer", stain: "P53", disease: "Pancancer", patients: "226", volume: "226 WSIs", format: ".sdpc" },
          { name: "PSA_pancancer", stain: "PSA", disease: "Pancancer", patients: "124", volume: "124 WSIs", format: ".sdpc" },
          { name: "AR_breast", stain: "AR", disease: "Breast Cancer", patients: "303", volume: "303 WSIs", format: ".sdpc" },
          { name: "ER", stain: "ER", disease: "Pancancer", patients: "224", volume: "224 WSIs", format: ".sdpc" },
          { name: "PR", stain: "PR", disease: "Pancancer", patients: "222", volume: "222 WSIs", format: ".sdpc" },
          { name: "PD_L1_Pancancer", stain: "PD_L1", disease: "Pancancer", patients: "163", volume: "163 WSIs", format: ".sdpc" },
          { name: "HER2_breast", stain: "HER2", disease: "Breast Cancer", patients: "331", volume: "331 WSIs", format: ".sdpc" },
          { name: "P40_pancancer", stain: "HER2", disease: "Pancancer", patients: "288", volume: "288 WSIs", format: ".sdpc" },
          { name: "NapsinA_pancancer", stain: "NapsinA", disease: "Pancancer", patients: "238", volume: "238 WSIs", format: ".sdpc" },
          { name: "CDX2_pancancer", stain: "CDX2", disease: "Pancancer", patients: "165", volume: "165 WSIs", format: ".sdpc" },
        ],
      },
    };

    // ========== 2) Helpers ==========
    const parseMean = (s) => {
      // s like "0.981 ¬± 0.0120" -> 0.981
      if (typeof s === "number") return s;
      if (!s) return NaN;
      const m = String(s).match(/([0-9]*\.?[0-9]+)/);
      return m ? parseFloat(m[1]) : NaN;
    };

    function computeCategoryMeanRanks(category) {
      // For each task in category, rank models by AUC (desc), then average rank over tasks.
      const taskNames = category.tasks.filter(t => DATA.tasks[t]);
      const perTaskRanks = {};
      taskNames.forEach(task => {
        const rows = DATA.tasks[task];
        // rank by AUC desc
        const sorted = [...rows]
          .map(r => ({ model: r.model, auc: parseMean(r.auc) }))
          .filter(r => !Number.isNaN(r.auc))
          .sort((a,b) => b.auc - a.auc);
        sorted.forEach((r, idx) => {
          if (!perTaskRanks[r.model]) perTaskRanks[r.model] = [];
          perTaskRanks[r.model].push(idx + 1); // rank starts at 1
        });
      });
      // average
      const meanRanks = Object.entries(perTaskRanks).map(([model, ranks]) => ({
        model,
        meanRank: ranks.reduce((a,b) => a+b, 0) / ranks.length
      }));
      // sort asc (lower better)
      return meanRanks.sort((a,b) => a.meanRank - b.meanRank);
    }

    function fmt(x, digits=3) {
      return Number.isFinite(x) ? x.toFixed(digits) : "‚Äì";
    }

    // ========== 3) Renderers ==========
	function renderFMTable() {
	  const tbody = document.getElementById("fmTableBody");
	  tbody.innerHTML = "";
	  DATA.foundationModels.forEach(r => {
		// ÁæéÂåñ IHC ÂõæÊ†á
		let ihcHTML = "";
		if (r.ihcTrain === "‚úì") {
		  ihcHTML = `<span class="text-emerald-400 font-bold text-lg">‚úì</span>`;
		} else if (r.ihcTrain === "‚úó" || r.ihcTrain === "X") {
		  ihcHTML = `<span class="text-rose-400 font-bold text-lg">‚úó</span>`;
		} else {
		  ihcHTML = `<span class="text-slate-400">‚Äì</span>`;
		}

		const tr = document.createElement("tr");
		tr.innerHTML = `
      <td class="py-2 pr-6">
        ${r.url 
          ? `<a href="${r.url}" target="_blank" class="text-sky-400 hover:text-fuchsia-300 hover:underline transition-colors">${r.name}</a>` 
          : r.name}
      </td>
		  <td class="py-2 pr-6">${r.level}</td>
		  <td class="py-2 pr-6 text-center">${ihcHTML}</td>
		  <td class="py-2 pr-6">${r.venue}</td>
		  <td class="py-2 pr-6">${r.date}</td>
		  <td class="py-2 pr-6">${r.ssl}</td>
		  <td class="py-2 pr-6">${r.arch}</td>
		  <td class="py-2 pr-2 text-right tabular-nums">${r.params}</td>
		  <td class="py-2 pr-2 text-right tabular-nums">${r.wsis}</td>
		`;
		tbody.appendChild(tr);
	  });
	}

    function renderDatasets() {
      const pub = document.getElementById("publicDataBody");
      const pri = document.getElementById("privateDataBody");
      pub.innerHTML = "";
      pri.innerHTML = "";
      DATA.datasets.public.forEach(d => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="py-2 pr-4">${d.name}</td>
          <td class="py-2 pr-4">${d.stain}</td>
          <td class="py-2 pr-4">${d.disease}</td>
          <td class="py-2 pr-2 text-right tabular-nums">${d.patients}</td>
          <td class="py-2 pr-2 text-right tabular-nums">${d.volume}</td>
          <td class="py-2 pr-2">${d.format}</td>
        `;
        pub.appendChild(tr);
      });
      DATA.datasets.private.forEach(d => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="py-2 pr-4">${d.name}</td>
          <td class="py-2 pr-4">${d.stain}</td>
          <td class="py-2 pr-4">${d.disease}</td>
          <td class="py-2 pr-2 text-right tabular-nums">${d.patients}</td>
          <td class="py-2 pr-2 text-right tabular-nums">${d.volume}</td>
          <td class="py-2 pr-2">${d.format}</td>
        `;
        pri.appendChild(tr);
      });
    }

    let currentCategory = DATA.categories[0]?.id || null;
    let rankChart = null;
    let heroChart = null;
    let taskChart = null;

    function renderCategoryTabs() {
      const tabs = document.getElementById("categoryTabs");
      tabs.innerHTML = "";
      DATA.categories.forEach(cat => {
        const btn = document.createElement("button");
        btn.className =
          "px-4 py-2 rounded-xl border border-slate-700/60 hover:border-fuchsia-400/50 " +
          (cat.id === currentCategory ? "bg-fuchsia-500/20 text-fuchsia-200" : "glass");
        btn.textContent = cat.name;
        btn.onclick = () => {
          currentCategory = cat.id;
          renderRanking();
          renderTaskCards();
        };
        tabs.appendChild(btn);
      });
    }

    function renderRanking() {
      const cat = DATA.categories.find(c => c.id === currentCategory);
      document.getElementById("currentCategoryLabel").textContent = `‚Äî ${cat?.name || ""}`;

      const tbody = document.getElementById("rankTableBody");
      tbody.innerHTML = "";

      const ranks = computeCategoryMeanRanks(cat);
      ranks.forEach(r => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="py-2 pr-4">${r.model}</td>
          <td class="py-2 pr-2 text-right tabular-nums">${fmt(r.meanRank, 2)}</td>
        `;
        tbody.appendChild(tr);
      });

      // Chart
      const ctx = document.getElementById("rankChart").getContext("2d");
      if (rankChart) rankChart.destroy();
      rankChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ranks.map(r => r.model),
          datasets: [{
            label: "Mean Rank (lower=better)",
            data: ranks.map(r => r.meanRank),
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: { mode: "index", intersect: false }
          },
          scales: {
            x: { ticks: { color: "#cbd5e1" }, grid: { display: false } },
            y: { ticks: { color: "#cbd5e1" }, grid: { color: "rgba(148,163,184,0.2)" }, reverse: false }
          }
        }
      });
    }

    function renderTaskCards() {
      const cat = DATA.categories.find(c => c.id === currentCategory);
      const wrap = document.getElementById("taskCards");
      wrap.innerHTML = "";

      if (!cat.tasks.length) {
        wrap.innerHTML = `<div class="col-span-full text-slate-400">No tasks yet. Add them in <code>DATA.tasks</code> and reference task names in this category.</div>`;
        return;
      }

      cat.tasks.forEach(t => {
        const card = document.createElement("div");
        card.className = "glass rounded-2xl p-4 md:p-6 flex flex-col";
        const rows = DATA.tasks[t] || [];
        const nModels = rows.length;
        const topByAUC = [...rows].sort((a,b) => parseMean(b.auc) - parseMean(a.auc))[0];
        card.innerHTML = `
          <div class="flex items-start justify-between gap-4">
            <div>
              <h3 class="text-lg font-semibold">${t}</h3>
              <p class="text-slate-400 text-sm">${nModels} models</p>
            </div>
            <button class="px-3 py-1 rounded-lg border border-fuchsia-400/40 hover:border-fuchsia-300/70"
              aria-label="Open ${t} details">Details</button>
          </div>
          <div class="mt-4 text-sm text-slate-300">
            ${topByAUC ? `Best AUC so far: <span class="text-fuchsia-200 font-medium">${topByAUC.model}</span> (${parseMean(topByAUC.auc).toFixed(3)})` : "No metrics yet."}
          </div>
        `;
        card.querySelector("button").onclick = () => openTaskModal(t);
        wrap.appendChild(card);
      });
    }

    function openTaskModal(taskName) {
      const rows = DATA.tasks[taskName] || [];
      document.getElementById("modalTitle").textContent = taskName;
      document.getElementById("modalSubtitle").textContent = "Per-model metrics (mean ¬± std)";

      const tbody = document.getElementById("modalTableBody");
      tbody.innerHTML = "";
      rows.forEach(r => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="py-2 pr-4">${r.model}</td>
          <td class="py-2 pr-2 text-right tabular-nums">${r.auc || "‚Äì"}</td>
          <td class="py-2 pr-2 text-right tabular-nums">${r.acc || "‚Äì"}</td>
          <td class="py-2 pr-2 text-right tabular-nums">${r.f1 || "‚Äì"}</td>
        `;
        tbody.appendChild(tr);
      });

      // chart
      const labels = rows.map(r => r.model);
      const aucs = rows.map(r => parseMean(r.auc));
      const ctx = document.getElementById("taskChart").getContext("2d");
      if (taskChart) taskChart.destroy();
      taskChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels,
          datasets: [{ label: "AUC", data: aucs }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: {
            x: { ticks: { color: "#cbd5e1" }, grid: { display: false } },
            y: { ticks: { color: "#cbd5e1" }, grid: { color: "rgba(148,163,184,0.2)" }, suggestedMin: 0.7, suggestedMax: 1.0 }
          }
        }
      });

      document.getElementById("taskModal").classList.remove("hidden");
      document.getElementById("taskModal").classList.add("flex");
    }
    function closeTaskModal() {
      document.getElementById("taskModal").classList.add("hidden");
      document.getElementById("taskModal").classList.remove("flex");
    }
    // ========== 4) Init ==========
    renderFMTable();
    renderDatasets();
    renderCategoryTabs();
    renderRanking();
    renderTaskCards();
  </script>
</body>
</html>
